import{T as _}from"./TaskEditForm.2521a08f.js";import{r as u,e as m,_ as w,d as y,a6 as S,l as T,o as i,c as U,x as l,A as d,K as x,a1 as b}from"./index.7ffa0279.js";import{T as c}from"./TaskService.d31c83d9.js";import"./TooltipPopper.74579a57.js";import"./index.esm.69a75d9a.js";function g(p){const t=u(!0),o=u();return m(async()=>{const e=await c.fetchTaskById(p);o.value=e.data.task,t.value=!1}),{task:o,isLoading:t}}const B={class:"outer"},E=y({__name:"UpdateTaskView",setup(p){const t=S(),o=T();if(t.params.id===void 0)throw new Error("Unknown id");const{task:e,isLoading:f}=g(t.params.id),n=u([]),k=async()=>{if(!e.value)return;const r=new FormData;for(const a in e.value){const v=a;r.append(a,e.value[v])}n.value.forEach(a=>{r.append("files",a)}),o.setIsGlobalSpinnerShown(!0);const s=await c.putTask(e.value._id,r);e.value=s.data.task,n.value=[],o.setIsGlobalSpinnerShown(!1)};return(r,s)=>(i(),U("div",B,[l(f)||l(e)===void 0?(i(),d(b,{key:0})):(i(),d(_,{key:1,files:n.value,"onUpdate:files":s[0]||(s[0]=a=>n.value=a),task:l(e),"onUpdate:task":s[1]||(s[1]=a=>x(e)?e.value=a:null),onSubmit:k},null,8,["files","task"]))]))}});var F=w(E,[["__scopeId","data-v-23be16c9"]]);export{F as default};
